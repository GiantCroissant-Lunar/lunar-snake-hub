{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://lunar-snake-hub/schemas/config.json",
  "title": "Lunar Snake Hub Configuration",
  "description": "Non-sensitive configuration for lunar-snake-hub infrastructure",
  "type": "object",
  "required": ["Organization", "Repository", "MacMini", "GLM", "Services"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "Organization": {
      "type": "string",
      "description": "GitHub organization name",
      "pattern": "^[a-zA-Z0-9-]+$"
    },
    "Repository": {
      "type": "string",
      "description": "Repository name",
      "pattern": "^[a-zA-Z0-9-]+$"
    },
    "Description": {
      "type": "string",
      "description": "Human-readable description of this configuration"
    },
    "MacMini": {
      "type": "object",
      "required": ["TailscaleName", "TailscaleIP", "RepoPath"],
      "properties": {
        "TailscaleName": {
          "type": "string",
          "description": "Tailscale hostname for Mac Mini",
          "pattern": "^[a-z0-9-]+$"
        },
        "TailscaleIP": {
          "type": "string",
          "description": "Tailscale IP address",
          "pattern": "^100\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$"
        },
        "RepoPath": {
          "type": "string",
          "description": "Path to repository on Mac Mini"
        }
      }
    },
    "GLM": {
      "type": "object",
      "required": ["BaseURL", "Model", "EmbeddingModel"],
      "properties": {
        "BaseURL": {
          "type": "string",
          "format": "uri",
          "description": "GLM API base URL"
        },
        "Model": {
          "type": "string",
          "description": "Default GLM model name"
        },
        "EmbeddingModel": {
          "type": "string",
          "description": "GLM embedding model name"
        }
      }
    },
    "Services": {
      "type": "object",
      "required": ["Letta", "Qdrant", "Gateway", "N8n"],
      "properties": {
        "Letta": {
          "type": "object",
          "required": ["Port", "DatabaseURL"],
          "properties": {
            "Port": {
              "type": "integer",
              "minimum": 1024,
              "maximum": 65535,
              "description": "Letta HTTP port"
            },
            "DatabaseURL": {
              "type": "string",
              "description": "SQLite database URL"
            }
          }
        },
        "Qdrant": {
          "type": "object",
          "required": ["Port", "GrpcPort"],
          "properties": {
            "Port": {
              "type": "integer",
              "minimum": 1024,
              "maximum": 65535,
              "description": "Qdrant HTTP port"
            },
            "GrpcPort": {
              "type": "integer",
              "minimum": 1024,
              "maximum": 65535,
              "description": "Qdrant gRPC port"
            }
          }
        },
        "Gateway": {
          "type": "object",
          "required": ["Port"],
          "properties": {
            "Port": {
              "type": "integer",
              "minimum": 1024,
              "maximum": 65535,
              "description": "Gateway HTTP port"
            }
          }
        },
        "N8n": {
          "type": "object",
          "required": ["Port", "User"],
          "properties": {
            "Port": {
              "type": "integer",
              "minimum": 1024,
              "maximum": 65535,
              "description": "n8n HTTP port"
            },
            "User": {
              "type": "string",
              "description": "n8n admin username"
            }
          }
        }
      }
    },
    "GitHub": {
      "type": "object",
      "required": ["Enabled"],
      "properties": {
        "Enabled": {
          "type": "boolean",
          "description": "Whether GitHub integration is enabled"
        }
      }
    }
  }
}
